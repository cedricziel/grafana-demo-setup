# .github/workflows/deploy.yml
name: Deploy
on:
  push:
    branches: main

jobs:
  deployment:
    runs-on: 'ubuntu-latest'
    steps:
      - uses: actions/checkout@v3
      - name: Deploy
        uses: WyriHaximus/github-action-helm3@v3
        with:
          exec: helm upgrade otel-demo-appo11y-cedric open-telemetry/opentelemetry-demo --install --wait --atomic --namespace=otel-demo-appo11y-cedric --values=./otel-demo-appo11y/values.yml
          kubeconfig: '${{ secrets.KUBECONFIG }}'
          overrule_existing_kubeconfig: "true"
